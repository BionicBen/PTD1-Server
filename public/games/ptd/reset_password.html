<!DOCTYPE html>
<html lang="en">
<head>
    <title>Forgot Password</title>
    <meta charset="UTF-8">
    <link rel='stylesheet' type='text/css' href='../../_static/css/base.css'>
    <link rel='stylesheet' type='text/css' href='../../_static/css/suckerfish.css'>
    <link rel='stylesheet' type='text/css' href="../../_static/css/style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous">
    </script>
    <script>
        $(function () {
            $("#header").load("header.html");
            $("#nav").load("nav.html");
        });

        //Listen when a button, with a class of "myButton", is clicked
        //You can use any jQuery/JavaScript event that you'd like to trigger the call
        function validate() {
            //Send the AJAX call to the server
            $.ajax({
                //The URL to process the request
                'url' : '/api/resetPassword/',
                //The type of request, also known as the "method" in HTML forms
                //Can be 'GET' or 'POST'
                'type' : 'POST',
                //Any post-data/get-data parameters
                //This is optional
                'data' : {
                    'email' : $('#email').val(),
                },
                //The response from the server
                'success' : function(data) {
                    //You can use any jQuery/JavaScript here!!!
                    console.log(data);

                    switch(data) {
                        case 'success':
                            alert('Email sent successfully!');
                            break;
                        case '0':
                            alert('Unknown error occurred while trying to send email');
                            break;
                        case '1':
                            alert('Email field cannot be empty!')
                            break;
                        case '2':
                            alert('Email must contain "@"')
                            break;
                        case '3':
                            alert('Domain must have an mx record associated with it')
                            break;
                        case '8':
                            alert('Haha! Nice try!');
                            break;
                    }
                }
            });
        }
    </script>
</head>
<body>
<div id="header"></div>
<div id="content">
    <div id="nav"></div>
    <table id="content_table">
        <tbody>
        <tr>
            <td id="sidebar">
                <div class="block">
                    <div class="title">
                        <p>Forgot Password</p>
                    </div>
                    <div class="content">
                        <p>Please enter your email below to get an email to reset your password!</p>
                        <form id="forgotPassword" action="javascript:void(0);" onsubmit="validate()" method="post">
                            <br>
                            <label><b>Email:</b>
                                <input id="email" class="text" name="email" type="text">
                            </label>
                            <br>
                            <br>
                            <div class="login_actions">
                                <input value="Send" type="submit" class="login_btn">
                            </div>
                        </form>
                    </div>
                </div>
            </td>
            <td id="main">
                <div class="block">
                    <div class="title">
                        <p>Pok√©mon Tower Defense: Forgot Password</p>
                    </div>
                    <div class="content">
                        <p>So you forgot your password, it happens to the best of us but you're in luck, if you used an authentic email address (that you have access to) when making your account then you can reset your password with the link sent to your email!</p>
                    </div>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>